<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ux_client_script">
    <sys_ux_client_script action="INSERT_OR_UPDATE">
        <controller_preset/>
        <includes/>
        <macroponent display_value="Default">534ad6883b6e3a10bc1ccdd643e45ac7</macroponent>
        <name>Submit Request</name>
        <preset/>
        <required_translations>[]</required_translations>
        <script><![CDATA[/**
 * @param {Object} params
 * @param {params.api} params.api
 * @param {any} params.event
 * @param {ApiHelpers} params.helpers
 */
function handler({ api, event, helpers }) {
  // ถ้า event นี้มาจาก validate แล้ว success
//   if (event.payload.status !== 'success') return;

  // ดึง request จาก state
  const request = api.state.request || {};

console.log("request ",request);

  // (แนะนำ) เช็คขั้นต่ำก่อนส่ง
  if (!request.title || String(request.title).trim() === '') {
    // ถ้ามี notification helper ค่อยใช้ (บาง instance ไม่มี)
    // try {
    //   helpers.screen.updateStatus.({
    //     status: 'error',
    //     message: 'Title is required'
    //   });
    // } catch (e) {}
    return;
  }
console.log("called submit request ",request);
  // ✅ เรียก Data Resource (Transform) แล้วส่ง input เข้าไป
  // NOTE: ชื่อ input ต้องตรงกับที่คุณสร้างไว้ใน Data Broker Server Script (inputs)
  api.data.request_transform_data_1.execute({
    payload: request
  });
}
]]></script>
        <script_api_version>2.0.0</script_api_version>
        <sys_class_name>sys_ux_client_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2026-01-20 11:10:17</sys_created_on>
        <sys_id>c5e188f53b2a7650bc1ccdd643e45ada</sys_id>
        <sys_mod_count>3</sys_mod_count>
        <sys_name>Submit Request</sys_name>
        <sys_package display_value="BOT Application" source="x_1896436_bot_ap_0">566dc70e3b527210bc1ccdd643e45a0f</sys_package>
        <sys_policy/>
        <sys_scope display_value="BOT Application">566dc70e3b527210bc1ccdd643e45a0f</sys_scope>
        <sys_update_name>sys_ux_client_script_c5e188f53b2a7650bc1ccdd643e45ada</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2026-01-20 11:26:51</sys_updated_on>
        <target>macroponent</target>
        <type>default</type>
    </sys_ux_client_script>
</record_update>
